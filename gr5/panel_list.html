<!DOCTYPE html>
<html lang="en">

<head>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <style>
        .list-group {
            width: 600px
        }
        .classWithPad { margin:10px; padding:10px; }
    </style>
    <script src="https://code.jquery.com/jquery-1.12.3.js"   integrity="sha256-1XMpEtA4eKXNNpXcJ1pmMPs8JV+nwLdEqwiJeCQEkyc="   crossorigin="anonymous"></script>
    <script>

// returns the html for a single event div element
// an event is an object with the following fields:
// 1. date (string for now)
// 2. location (string for now)
// 3. difficulty (number in range 0-15)
// 4. num (number) - number of participants 
function render_event(event) {
    console.log("rendering event!");
    date_field = $("<td></td>")
        .addClass("classWithPad")
        .css("width", "150px")
        .append(event.date); // TODO should span two lines
    console.log(date_field);
    loc_field = $("<td></td>")
        .addClass("classWithPad")
        .css("width", "150px")
        .append(event.location + "<br>" + "40 Miles");
    console.log(loc_field);
    diff_field = $("<td></td>")
        .addClass("classWithPad")
        .addClass("text-center")
        .css("width", "150px")
        .append("V" + event.difficulty);
    console.log(diff_field);
    num_field = $("<td></td>")
        .addClass("classWithPad")
        .css("width", "150px")
        .append(event.num + " Participants");
    console.log(num_field);
    element = $('<a href="#"></a>').addClass("list-group-item").append(
        $('<table></table>').append(
            $('<tr></tr>')
                .append(date_field)
                .append(loc_field)
                .append(diff_field)
                .append(num_field)));
    console.log(element.html());
    return element;
};

// appends the event table, including header, to the parent element
function append_event_table(events, parent) {
    table = $("<div></div>")
    .append(
    $("<table></table>")
        .append(
            $("<tr></tr>").attr("id", "sort_by_buttons")
            .append($("<td></td>").attr("id", "sort_by_date").addClass("classWithPad").addClass("text-center").css("width", "150px").html("Date and Time"))
            .append($("<td></td>").attr("id", "sort_by_location").addClass("classWithPad").addClass("text-center").css("width", "150px").html("Location"))
            .append($("<td></td>").attr("id", "sort_by_difficulty").addClass("classWithPad").addClass("text-center").css("width", "150px").html("Difficulty"))
            .append($("<td></td>").attr("id", "sort_by_num").addClass("classWithPad").addClass("text-center").css("width", "150px").html("Number of Participants"))))
    .append(
        $("<div></div>").addClass("list-group").attr("id", "event_list"));
    $(parent).append(table);
    for (var i = 0; i < events.length; i++) {
        $("#event_list").append(render_event(events[i]));
    }
    $("#event_list" ).on( "click", "a", function( event ) {
        $("#event_list a").removeClass("active");
        $(this).addClass("active");
        console.log("HI!")
        event.preventDefault();
        console.log( $( this ).text() );
    });
    $("#sort_by_buttons").on("click", "td",
        function(e) {
            console.log("clicked on a sort by button");
            $("#sort_by_buttons td").css("font-weight", "");
            $(this).css('font-weight', 'bold');
        });
    
    // TODO click handlers for the sort button
    $("#sort_by_date").on("click", function(e) {
    });
    $("#sort_by_location").on("click", function(e) {
    });
    $("#sort_by_difficulty").on("click", function(e) {
    });
    $("#sort_by_num").on("click", function(e) {
    });
    
    $("#sort_by_buttons").on("mouseover", "td",
        function(e) {
            console.log("mouseover a sort by button");
            $("#sort_by_buttons td").css("text-decoration", "");
            $(this).css('text-decoration', 'underline');
    });
};

$(document).ready(function () {

console.log("ready!");
event1 = {  
            date: "Saturday 5pm<br>October 12",
            location: "New York, NY",
            difficulty: 4,
            num: 100
        };
event2 = {  
            date: "Saturday 5pm<br>October 12",
            location: "New York, NY",
            difficulty: 10,
            num: 2
        };
events = [event1, event2];
render_event_table(events, "body");
});

</script>
</head>

<body>
</body>

</html>
